<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<!-- ==================== HEAD FRAGMENT ==================== -->
<head th:fragment="head(title)">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Auvier - House of Advancement. Luxury fashion and refined elegance.">
    <title th:text="${title} + ' | AUVIER'">AUVIER</title>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" th:href="@{/favicon.ico}">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Main Stylesheet -->
    <link th:href="@{/assets/public/css/public.css}" rel="stylesheet">
</head>

<body>

<!-- ==================== ANNOUNCEMENT BAR ==================== -->
<div th:fragment="announcement" class="au-announcement">
    <div class="au-container">
        <p>Complimentary shipping on all orders over $500</p>
    </div>
</div>

<!-- ==================== NAVIGATION ==================== -->
<header th:fragment="header" class="au-header">
    <div class="au-container">
        <nav class="au-nav">
            <!-- Mobile Menu Toggle -->
            <button class="au-nav__toggle" aria-label="Menu" onclick="toggleMobileMenu()">
                <span></span>
                <span></span>
            </button>

            <!-- Left Navigation -->
            <ul class="au-nav__left">
                <li><a th:href="@{/shop}" class="au-nav__link">Shop</a></li>
                <li><a th:href="@{/collections}" class="au-nav__link">Collections</a></li>
                <li><a th:href="@{/about}" class="au-nav__link">About</a></li>
            </ul>

            <!-- Logo -->
            <a th:href="@{/}" class="au-logo">AUVIER</a>

            <!-- Right Navigation -->
            <ul class="au-nav__right">
                <li>
                    <button class="au-nav__icon" aria-label="Search" onclick="toggleSearch()">
                        <i class="bi bi-search"></i>
                    </button>
                </li>
                <!-- Not logged in: Show Sign In link -->
                <li sec:authorize="!isAuthenticated()">
                    <a th:href="@{/login}" class="au-nav__link">Sign In</a>
                </li>
                <!-- Logged in: Show Account dropdown -->
                <li sec:authorize="isAuthenticated()" class="au-nav__dropdown">
                    <button class="au-nav__icon" aria-label="Account" onclick="toggleAccountMenu()">
                        <i class="bi bi-person"></i>
                    </button>
                    <div class="au-nav__dropdown-menu" id="accountDropdown">
                        <a th:href="@{/profile}"><i class="bi bi-person-circle"></i> My Profile</a>
                        <a th:href="@{/orders}"><i class="bi bi-box-seam"></i> My Orders</a>
                        <hr>
                        <form th:action="@{/logout}" method="post">
                            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                            <button type="submit" class="au-nav__dropdown-btn">
                                <i class="bi bi-box-arrow-right"></i> Sign Out
                            </button>
                        </form>
                    </div>
                </li>
                <!-- Cart: Show for everyone -->
                <li>
                    <a th:href="@{/cart}" class="au-nav__icon au-nav__cart" aria-label="Shopping Bag">
                        <i class="bi bi-bag"></i>
                        <span class="au-nav__cart-count" id="cartCount" style="display: none;">0</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>

    <!-- Search Overlay -->
    <div class="au-search" id="searchOverlay">
        <div class="au-container">
            <form th:action="@{/shop}" method="get" class="au-search__form">
                <input type="text" name="q" class="au-search__input" placeholder="Search products..." autocomplete="off">
                <button type="submit" class="au-search__submit">
                    <i class="bi bi-arrow-right"></i>
                </button>
                <button type="button" class="au-search__close" onclick="toggleSearch()">
                    <i class="bi bi-x"></i>
                </button>
            </form>
        </div>
    </div>

    <!-- Mobile Menu -->
    <div class="au-mobile-menu" id="mobileMenu">
        <div class="au-mobile-menu__content">
            <ul class="au-mobile-menu__links">
                <li><a th:href="@{/shop}">Shop All</a></li>
                <li><a th:href="@{/collections}">Collections</a></li>
                <li><a th:href="@{/about}">About Us</a></li>
                <li><a th:href="@{/contact}">Contact</a></li>
            </ul>
            <div class="au-mobile-menu__footer">
                <a th:href="@{/login}" sec:authorize="!isAuthenticated()">Sign In</a>
                <a th:href="@{/register}" sec:authorize="!isAuthenticated()">Create Account</a>
                <a th:href="@{/profile}" sec:authorize="isAuthenticated()">My Profile</a>
                <a th:href="@{/orders}" sec:authorize="isAuthenticated()">My Orders</a>
                <form th:action="@{/logout}" method="post" sec:authorize="isAuthenticated()" style="display:inline;">
                    <button type="submit" class="au-link-btn">Sign Out</button>
                </form>
            </div>
        </div>
    </div>
</header>

<!-- ==================== FOOTER ==================== -->
<footer th:fragment="footer" class="au-footer">
    <div class="au-container">
        <!-- Footer Top -->
        <div class="au-footer__top">
            <div class="au-footer__brand">
                <a th:href="@{/}" class="au-footer__logo">AUVIER</a>
                <p class="au-footer__tagline">House of Advancement</p>
            </div>

            <div class="au-footer__newsletter">
                <h4>Stay Connected</h4>
                <p>Subscribe for exclusive updates and early access.</p>
                <form class="au-newsletter-form">
                    <input type="email" placeholder="Enter your email" required>
                    <button type="submit">
                        <i class="bi bi-arrow-right"></i>
                    </button>
                </form>
            </div>
        </div>

        <!-- Footer Links -->
        <div class="au-footer__grid">
            <div class="au-footer__col">
                <h5>Shop</h5>
                <ul>
                    <li><a th:href="@{/shop}">All Products</a></li>
                    <li><a th:href="@{/shop?new=true}">New Arrivals</a></li>
                    <li><a th:href="@{/collections}">Collections</a></li>
                </ul>
            </div>
            <div class="au-footer__col">
                <h5>Support</h5>
                <ul>
                    <li><a th:href="@{/contact}">Contact Us</a></li>
                    <li><a th:href="@{/faq}">FAQ</a></li>
                    <li><a th:href="@{/shipping}">Shipping & Returns</a></li>
                    <li><a th:href="@{/size-guide}">Size Guide</a></li>
                </ul>
            </div>
            <div class="au-footer__col">
                <h5>Company</h5>
                <ul>
                    <li><a th:href="@{/about}">About Us</a></li>
                    <li><a th:href="@{/careers}">Careers</a></li>
                    <li><a th:href="@{/press}">Press</a></li>
                </ul>
            </div>
            <div class="au-footer__col">
                <h5>Follow Us</h5>
                <div class="au-footer__social">
                    <a href="#" aria-label="Instagram"><i class="bi bi-instagram"></i></a>
                    <a href="#" aria-label="Facebook"><i class="bi bi-facebook"></i></a>
                    <a href="#" aria-label="Pinterest"><i class="bi bi-pinterest"></i></a>
                    <a href="#" aria-label="Twitter"><i class="bi bi-twitter-x"></i></a>
                </div>
            </div>
        </div>

        <!-- Footer Bottom -->
        <div class="au-footer__bottom">
            <p>&copy; <span th:text="${#dates.format(#dates.createNow(), 'yyyy')}">2026</span> Auvier. All rights reserved.</p>
            <nav class="au-footer__legal">
                <a href="#">Privacy Policy</a>
                <a href="#">Terms of Service</a>
                <a href="#">Cookie Settings</a>
            </nav>
        </div>
    </div>
</footer>

<!-- ==================== SCRIPTS ==================== -->
<th:block th:fragment="scripts">
    <script th:src="@{/assets/public/js/public.js}"></script>
</th:block>

</body>
</html>
